<% name = (params[:reviews].present?)? "review" : (params[:gigs].present?)? "gig" : "request"  %>
<% collection = instance_variable_get("@"+name+"s") %>

elements_list = $('[paginated-'+'<%= j name %>'+"s]");
paginator_container = elements_list.closest("[pag-and-list]").find("[paginator-container]");
elements_list.append('<%= j render(partial: "shared/users/#{name}", collection: collection) %>');
paginator_container.html("");

<% if collection.next_page %>
  paginator_container.append("<%= j paginate(collection, param_name: name+'s') %>");
<% else %>
paginator_container.closest("div").remove();  
<% end %>

<% sleep 1 %>
